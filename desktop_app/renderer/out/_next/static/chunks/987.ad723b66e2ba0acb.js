"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{4987:function(t,e,n){n.r(e),n.d(e,{Editor:function(){return td}});var i,o,r=n(851),a=n(4246),A=n(7378),s=n(5381),l=n.n(s),d=n(7282),c=n(1692);function u(){let t=(0,r._)(["\n  background: #313131;\n  width: 100%;\n  height: 41px;\n  position: absolute;\n  top: 45px;\n  padding-left:16px;\n"]);return u=function(){return t},t}function h(){let t=(0,r._)(["\n  display: flex;\n  height: 100%;\n  align-items: center;\n  gap: 32px;\n  padding-left: 32px;\n"]);return h=function(){return t},t}function g(){let t=(0,r._)(["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  padding: 5px 0;\n  color: ",";\n  font-family: Pretendard;\n  font-size: 18px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 150%;\n  transition: color 0.3s ease;\n\n  &:hover {\n    color: #616fed;\n  }\n\n  &:active {\n    color: #616fed;\n  }\n"]);return g=function(){return t},t}let p=d.ZP.div.withConfig({componentId:"sc-3cd1dfb9-0"})(u()),f=d.ZP.ul.withConfig({componentId:"sc-3cd1dfb9-1"})(h()),m=d.ZP.li.withConfig({componentId:"sc-3cd1dfb9-2"})(g(),t=>t.isActive?c.Z.pointcolor:c.Z.white);var b=function(t){let{option:e,applyFontSize:n}=t,[i,o]=(0,A.useState)(null),r=t=>{n(t),o(t)};return(0,a.jsx)(p,{children:(0,a.jsx)(f,{children:e.map(t=>(0,a.jsx)(m,{isActive:i===t,onClick:()=>r(t),children:"default"===t?"Default":t},t))})})},w={src:"/_next/static/media/text_basic.5b02d451.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRnQAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDYAAAABYBrZtpPzHjVkHBSQo83BRY3G0r9kqCEiUvgIftuUvQOJeZ9ehAjXioLBNmGA8j4ooGEg/ABWUDggGAAAADABAJ0BKggACAACQDglpAADcAD++w0AAA==",blurWidth:8,blurHeight:8},B={src:"/_next/static/media/text.d12c7aa9.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRo4AAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDYAAAABYBrZtpPzHjVkHBSQo83BRY3G0r9kqCEiUvgIftuUvQOJeZ9ehAjXioLBNmGA8j4ooGEg/ABWUDggMgAAAHABAJ0BKggACAACQDglsAJ0Ab6AAP7Qyv/OJgHo/5gwI//z/jmGrhBAZ8C+TMsaQAAA",blurWidth:8,blurHeight:8},x={src:"/_next/static/media/bold_basic.5cea12b3.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRn4AAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSD8AAAABcFPbthqdDy7iIQ5SMhiIgZSpGRywBBgGAaMOPETEBCD4KbDzRIHkk245WnLrrx5K8oyz4eu9XhoUGJbJXwEAVlA4IBgAAAAwAQCdASoIAAgAAkA4JaQAA3AA/vsNAAA=",blurWidth:8,blurHeight:8},v={src:"/_next/static/media/bold.0aa22415.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRqIAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSD8AAAABcFPbthqdDy7iIQ5SMhiIgZSpGRywBBgGAaMOPETEBCD4KbDzRIHkk245WnLrrx5K8oyz4eu9XhoUGJbJXwEAVlA4IDwAAABwAQCdASoIAAgAAkA4JbACdAFAAAD+2ib/5y4B15F3+BcsXf+6T7e/s5MVH/VHt6ff/8G7sODQRhKJlAA=",blurWidth:8,blurHeight:8},E={src:"/_next/static/media/underline_basic.8fd378c9.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRnQAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDUAAAABYBPZtprzwwrScsfMVKGFdPHvAjxExAQg+BRUs7wqyGw3PUjMF8ErfZQUAcbQmQC2Zfka/wBWUDggGAAAADABAJ0BKggACAACQDglpAADcAD++w0AAA==",blurWidth:8,blurHeight:8},Q={src:"/_next/static/media/underline.ba2d5cda.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRpwAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDUAAAABYBPZtprzwwrScsfMVKGFdPHvAjxExAQg+BRUs7wqyGw3PUjMF8ErfZQUAcbQmQC2Zfka/wBWUDggQAAAAHABAJ0BKggACAACQDglsAJ0AXUAAP7aJv/lwtMGuevxmNo3/lzZA9HzvvYvn/8m/l/4OAWHS4Ga6CK3tdQAAAA=",blurWidth:8,blurHeight:8},C={src:"/_next/static/media/middleline_basic.dc63957c.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRngAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDkAAAABYBvZtpLzP6651eCSeUhGAQ59EdMnRUREIgAEYGVtgFBYZz9BSsJ3QQJN+R0oCk9dT0jQoxjBTwAAVlA4IBgAAAAwAQCdASoIAAgAAkA4JaQAA3AA/vsNAAA=",blurWidth:8,blurHeight:8},y={src:"/_next/static/media/middleline.b22a2a01.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRo4AAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDkAAAABYBvZtpLzP6651eCSeUhGAQ59EdMnRUREIgAEYGVtgFBYZz9BSsJ3QQJN+R0oCk9dT0jQoxjBTwAAVlA4IC4AAABwAQCdASoIAAgAAkA4JbACdAG+gAD+0Mr/z2d5H+/IxB6P/GnvR/yzm/IUUAAA",blurWidth:8,blurHeight:8},U={src:"/_next/static/media/place_basic.c9fe9822.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRngAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDkAAAABYBRJtpPh7Y2s4Xv4CkDjVwGG8umLID4bEREYQIEYlm1E9Nd53j0ET8kDxuw+YUaVc4khYkSAQAAAVlA4IBgAAAAwAQCdASoIAAgAAkA4JaQAA3AA/vsNAAA=",blurWidth:8,blurHeight:8},k={src:"/_next/static/media/place.c93a5c46.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRowAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSDkAAAABYBRJtpPh7Y2s4Xv4CkDjVwGG8umLID4bEREYQIEYlm1E9Nd53j0ET8kDxuw+YUaVc4khYkSAQAAAVlA4ICwAAABwAQCdASoIAAgAAkA4JbACdAFAAAD+0Mr/z0z//BKAZD/6J9IOqtLRWoAAAA==",blurWidth:8,blurHeight:8},S={src:"/_next/static/media/image_basic.a14c8667.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRoAAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSEEAAAABYFNr25L3P4zEYHJGl2Bs7rB5B0oQw0oQwOkQEUnwIXAqLxstoDzPZR6BYj2OPQVctp7OENAoGk0LMIosKQp+BABWUDggGAAAADABAJ0BKggACAACQDglpAADcAD++w0AAA==",blurWidth:8,blurHeight:8},D={src:"/_next/static/media/image.abbd904e.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRpIAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSEEAAAABYFNr25L3P4zEYHJGl2Bs7rB5B0oQw0oQwOkQEUnwIXAqLxstoDzPZR6BYj2OPQVctp7OENAoGk0LMIosKQp+BABWUDggKgAAAHABAJ0BKggACAACQDglqAJ0AaAAAP7Qyv/PTP/uX/627EfNuRaZWgAAAA==",blurWidth:8,blurHeight:8},R={src:"/_next/static/media/tag_basic.1634f92a.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRoAAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSEEAAAAAAAACAAAAAAEAAgBls68uAAACCpfNyx0AACyyq5SNgQcFip+VnKo1AAAWx8ujEgMAACSvsXEAAQEBAAAAAAIAAABWUDggGAAAADABAJ0BKggACAACQDglpAADcAD++w0AAA==",blurWidth:8,blurHeight:8},I={src:"/_next/static/media/tag.99f15b57.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRpIAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSEEAAAAAAAACAAAAAAEAAgBls68uAAACCpfNyx0AACyyq5SNgQcFip+VnKo1AAAWx8ujEgMAACSvsXEAAQEBAAAAAAIAAABWUDggKgAAAHABAJ0BKggACAACQDglqAJ0AaAAAP7Qyv/PTP/uX/629jPXrS2bfIAAAA==",blurWidth:8,blurHeight:8},j={src:"/_next/static/media/saved_basic.6b70ac83.webp",height:30,width:30,blurDataURL:"data:image/webp;base64,UklGRnwAAABXRUJQVlA4WAoAAAAQAAAABwAABwAAQUxQSD4AAAABcBtJkiJ1H7PIzAzSeUDqeXL+ix9vREQk/sm0cULPBauK7/eAaSVk5wG2e6fbGlh23bwlYN7WVesBgvgTAFZQOCAYAAAAMAEAnQEqCAAIAAJAOCWkAANwAP77DQAA",blurWidth:8,blurHeight:8};function P(){return(P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(null,arguments)}var J=function(t){return A.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none"},t),i||(i=A.createElement("path",{stroke:"#fff",d:"m9 6 12 8.5L9 23"})))};function _(){return(_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(null,arguments)}var G=function(t){return A.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:2,height:34,fill:"none"},t),o||(o=A.createElement("path",{stroke:"#fff",strokeOpacity:.2,d:"M1 0v34"})))},N=n(8934),W=n(3662);function L(){let t=(0,r._)(["\n  background: #1d1d1d !important;\n  width: 100%;\n  height: 50px;\n  display: flex;\n  position: relative;\n  button {\n    background: none;\n    border: none;\n    padding: 0;\n    margin: 0;\n    outline: none;\n    cursor: pointer;\n  }\n"]);return L=function(){return t},t}function q(){let t=(0,r._)(["\n  width: 30px;\n  height: 30px;\n"]);return q=function(){return t},t}function O(){let t=(0,r._)(["\n  width: 30px;\n  height: 100%;\n  background-size: cover;\n  background-repeat: no-repeat;\n"]);return O=function(){return t},t}function H(){let t=(0,r._)(["\n  display: flex;\n  gap: 30px;\n  alignitems: center;\n  padding-left: 26px;\n"]);return H=function(){return t},t}function V(){let t=(0,r._)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  position: absolute;\n  right: 30px;\n  top: 0px;\n"]);return V=function(){return t},t}function z(){let t=(0,r._)(["\n  background: none;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  white-space: nowrap;\n  color: ",";\n  font-family: Pretendard;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 170%;\n  height: 100% !important;\n  display: flex;\n  align-items: center;\n  margin-right: 12px !important;\n  &:hover {\n    color: "," !important;\n  }\n"]);return z=function(){return t},t}let Z=d.ZP.div.withConfig({componentId:"sc-edc8aca1-0"})(L()),M=d.ZP.img.withConfig({componentId:"sc-edc8aca1-1"})(q()),Y=d.ZP.button.withConfig({componentId:"sc-edc8aca1-2"})(O()),T=d.ZP.div.withConfig({componentId:"sc-edc8aca1-3"})(H()),K=d.ZP.div.withConfig({componentId:"sc-edc8aca1-4"})(V()),X=d.ZP.button.withConfig({componentId:"sc-edc8aca1-5"})(z(),c.Z.white,c.Z.pointcolor),F=t=>{let{isModalOpen:e,tagName:n,tagHandler:i,handleSave:o,handleCustomFontSizeClick:r}=t,[s,l]=(0,A.useState)({bold:!1,underline:!1,strike:!1,location:!1,tag:!1,image:!1,saved:!1}),d=(0,N.o)(t=>t.user),c=(0,W.useRouter)(),u=t=>{l(e=>({...e,[t]:!e[t]}))},h=()=>{(null==d?void 0:d.locationConsent)&&i("location")};return(0,a.jsxs)(Z,{id:"toolbar",children:[(0,a.jsxs)(T,{children:[(0,a.jsx)(Y,{className:"ql-customFontSize",onClick:r,children:(0,a.jsx)(M,{src:e?B.src:w.src,alt:"Font Size",className:"customFontSizeButton"})}),(0,a.jsx)(Y,{className:"ql-custom-bold",onClick:()=>u("bold"),children:(0,a.jsx)(M,{src:s.bold?v.src:x.src,alt:"Bold",className:"customBoldButton"})}),(0,a.jsx)(Y,{className:"ql-custom-underline",onClick:()=>u("underline"),children:(0,a.jsx)(M,{src:s.underline?Q.src:E.src,alt:"Underline",className:"customUnderlineButton"})}),(0,a.jsx)(Y,{className:"ql-custom-strike",onClick:()=>u("strike"),children:(0,a.jsx)(M,{src:s.strike?y.src:C.src,alt:"Strike",className:"customStrikeButton"})}),(0,a.jsx)(Y,{className:"ql-custom-location",onClick:()=>{h()},children:(0,a.jsx)(M,{src:"location"===n?k.src:U.src,alt:"location",className:"customLocationButton"})}),(0,a.jsx)(Y,{className:"ql-custom-tag",onClick:()=>{i("tag")},children:(0,a.jsx)(M,{src:"tag"===n?I.src:R.src,alt:"tag",className:"customTagButton"})}),(0,a.jsx)(Y,{className:"ql-custom-image",onClick:()=>u("image"),children:(0,a.jsx)(M,{src:s.image?D.src:S.src,alt:"imageIcon",className:"customImageButton"})}),(0,a.jsx)(Y,{className:"ql-custom-saved",onClick:()=>{c.push("/web/unfinished_writing")},children:(0,a.jsx)(M,{src:j.src,alt:"savedIcon",className:"customSavedButton"})})]}),(0,a.jsxs)(K,{children:[(0,a.jsx)(X,{onClick:o,children:"저장"}),(0,a.jsx)(G,{}),(0,a.jsx)(J,{})]})]})};var $=n(5262),tt=n.n($),te=n(8888);function tn(){let t=(0,r._)(["\n  position: relative;\n\n  .ql-snow .ql-editor strong {\n    font-weight: bold !important;\n  }\n  .ql-toolbar {\n    background: #1d1d1d !important;\n    border: none;\n  }\n  .ql-bold::before,\n  .ql-underline::before,\n  .ql-strike::before {\n    content: none;\n  }\n\n  .ql-editor {\n    padding: 72px 147px;\n    overflow-y: auto;\n  }\n\n  .ql-editor.ql-blank::before {\n    color: #686868;\n    font-family: Pretendard;\n    font-size: 16px;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 170%;\n    padding: 0 147px;\n  }\n\n  .ql-container.ql-snow {\n    border: none !important;\n  }\n"]);return tn=function(){return t},t}function ti(){let t=(0,r._)(["\n  display: flex;\n  justify-content: center;\n  padding: 0px 147px;\n  position: relative;\n"]);return ti=function(){return t},t}function to(){let t=(0,r._)(["\n  width: 57px;\n  height: 32px;\n  border: none;\n  background: none;\n  padding: 0;\n  outline: none;\n  box-shadow: none;\n  position: absolute;\n  top: 35px;\n  right: 13%;\n  z-index: 1;\n  background-color: ",";\n  color: ",";\n  cursor: pointer;\n"]);return to=function(){return t},t}let tr=d.ZP.div.withConfig({componentId:"sc-812344e0-0"})(tn()),ta=d.ZP.div.withConfig({componentId:"sc-812344e0-1"})(ti()),tA=d.ZP.button.withConfig({componentId:"sc-812344e0-2"})(to(),c.Z.pointcolor,c.Z.white),ts={small:"10px",default:"13px",large:"18px",huge:"32px"},tl=s.Quill.import("attributors/style/size");tl.whitelist=Object.values(ts),s.Quill.register(tl,!0);var td=function(t){let{value:e,setValue:n,tagValue:i,setTagValue:o,editorType:r,geuloqueUrl:s}=t,[d,c]=(0,A.useState)(!1),u=(0,A.useRef)(null),h=(0,A.useRef)(null),[g,p]=(0,A.useState)(null),[f,m]=(0,A.useState)(0),[w,B]=(0,A.useState)(!1),x=localStorage.getItem("tempThumbnail"),v=(0,W.useSearchParams)(),E=v.get("geuloquis"),Q=localStorage.getItem("pendingGeuloquis")||"false";(0,A.useEffect)(()=>{let t=localStorage.getItem("currentEssayId");if(E)"false"===Q&&p(s);else if(t&&!x){let e=JSON.parse(localStorage.getItem("essayData")||"[]"),n=e.find(e=>e.id===t&&e.imageSrc);(null==n?void 0:n.imageSrc)&&p(n.imageSrc)}else x&&p(x)},[r,x]),(0,A.useEffect)(()=>{let t=()=>{if(h.current){let t=h.current.getEditor().root;m(t.clientWidth)}};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]);let C=()=>{B(!0),setTimeout(()=>{B(!1)},3e3)},y=t=>{if(h.current){let e=h.current.getEditor();e&&e.format("size",ts[t])}},U=()=>{u.current&&(u.current.value="",u.current.click())},k=t=>{var e;let n=null===(e=t.target.files)||void 0===e?void 0:e[0];n&&(S(n,t=>{p(t),D(t),localStorage.setItem("geuloqueUrl",""),localStorage.setItem("tempThumbnail",t)}),u.current&&(u.current.value=""))},S=(t,e)=>{let n=new FileReader;n.readAsDataURL(t),n.onloadend=()=>{let t=n.result;e(t);let i=localStorage.getItem("currentEssayId");if(i){let e=JSON.parse(localStorage.getItem("essayData")||"[]"),n=e.map(e=>e.id===i?{...e,imageSrc:t}:e);localStorage.setItem("essayData",JSON.stringify(n))}}},D=t=>{p(t)},R=()=>{c(!d)},I=()=>{if(h.current){let t=h.current.getEditor();t.format("bold",!t.getFormat().bold),c(!1)}},j=()=>{if(h.current){let t=h.current.getEditor();t.format("underline",!t.getFormat().underline),c(!1)}},P=()=>{if(h.current){let t=h.current.getEditor();t.format("strike",!t.getFormat().strike),c(!1)}},J=(0,A.useMemo)(()=>({toolbar:{container:"#toolbar",handlers:{"custom-bold":I,"custom-underline":j,"custom-strike":P,"custom-image":U}}}),[]),_=(0,A.useMemo)(()=>["bold","underline","strike","size"],[]);(0,A.useEffect)(()=>{var t;let e=null===(t=h.current)||void 0===t?void 0:t.getEditor();if(e){let t=e.getModule("toolbar"),n=t=>{let e=t.target;(e.classList.contains("ql-custom-bold")||e.classList.contains("ql-custom-underline")||e.classList.contains("ql-custom-strike"))&&c(!1)};return t.container.addEventListener("click",n),()=>{t.container.removeEventListener("click",n)}}},[]);let G=t=>{o(e=>({...e,active:e.active===t?"":t}))};return(0,a.jsxs)(tr,{children:[(0,a.jsx)(te.Jp,{isShowToast:w,setIsShowToast:B,title:"임시 저장이 완료되었습니다."}),(0,a.jsx)(te.H$,{title:"저장이 완료되었습니다.",isShowToast:d,setIsShowToast:c}),(0,a.jsx)(F,{isModalOpen:d,tagName:i.active,tagHandler:G,handleSave:C,handleCustomFontSizeClick:R}),g&&(0,a.jsxs)(ta,{children:[(0,a.jsx)(tA,{onClick:U,children:"변경"}),(0,a.jsx)(tt(),{src:g,alt:"Thumbnail",width:f,height:460})]}),(0,a.jsx)(l(),{ref:h,value:e,onChange:n,modules:J,formats:_,placeholder:"내용을 입력하세요"}),(0,a.jsx)("input",{type:"file",accept:"image/*",ref:u,style:{display:"none"},onChange:k}),d&&(0,a.jsx)(b,{option:["small","default","large","huge"],applyFontSize:y})]})}},5381:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),o=0,e=0;e<n;e++)for(var r=arguments[e],a=0,A=r.length;a<A;a++,o++)i[o]=r[a];return i},A=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=A(n(7378)),l=A(n(1542)),d=A(n(6141)),c=A(n(9810)),u=function(t){function e(e){var n=t.call(this,e)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(t,e,i,o){var r,a;"text-change"===t?null===(r=n.onEditorChangeText)||void 0===r||r.call(n,n.editor.root.innerHTML,e,o,n.unprivilegedEditor):"selection-change"===t&&(null===(a=n.onEditorChangeSelection)||void 0===a||a.call(n,e,o,n.unprivilegedEditor))};var i=n.isControlled()?e.value:e.defaultValue;return n.value=null!=i?i:"",n}return o(e,t),e.prototype.validateProps=function(t){if(s.default.Children.count(t.children)>1)throw Error("The Quill editing area can only be composed of a single React element.");if(s.default.Children.count(t.children)){var e=s.default.Children.only(t.children);if((null==e?void 0:e.type)==="textarea")throw Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(t,e){var n,i=this;if(this.validateProps(t),!this.editor||this.state.generation!==e.generation)return!0;if("value"in t){var o=this.getEditorContents(),r=null!=(n=t.value)?n:"";this.isEqualValue(r,o)||this.setEditorContents(this.editor,r)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),a(this.cleanProps,this.dirtyProps).some(function(e){return!d.default(t[e],i.props[e])})},e.prototype.shouldComponentRegenerate=function(t){var e=this;return this.dirtyProps.some(function(n){return!d.default(t[n],e.props[n])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(t,e){var n=this;if(this.editor&&this.shouldComponentRegenerate(t)){var i=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==e.generation){var r=this.regenerationSnapshot,i=r.delta,a=r.selection;delete this.regenerationSnapshot,this.instantiateEditor();var A=this.editor;A.setContents(i),h(function(){return n.setEditorSelection(A,a)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(t,e){var n=new c.default(t,e);return null!=e.tabIndex&&this.setEditorTabIndex(n,e.tabIndex),this.hookEditor(n),n},e.prototype.hookEditor=function(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(t){t.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(t){return t&&t.ops},e.prototype.isEqualValue=function(t,e){return this.isDelta(t)&&this.isDelta(e)?d.default(t.ops,e.ops):d.default(t,e)},e.prototype.setEditorContents=function(t,e){var n=this;this.value=e;var i=this.getEditorSelection();"string"==typeof e?t.setContents(t.clipboard.convert(e)):t.setContents(e),h(function(){return n.setEditorSelection(t,i)})},e.prototype.setEditorSelection=function(t,e){if(this.selection=e,e){var n=t.getLength();e.index=Math.max(0,Math.min(e.index,n-1)),e.length=Math.max(0,Math.min(e.length,n-1-e.index)),t.setSelection(e)}},e.prototype.setEditorTabIndex=function(t,e){var n;(null===(n=null==t?void 0:t.scroll)||void 0===n?void 0:n.domNode)&&(t.scroll.domNode.tabIndex=e)},e.prototype.setEditorReadOnly=function(t,e){e?t.disable():t.enable()},e.prototype.makeUnprivilegedEditor=function(t){return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw Error("Instantiating on missing editing area");var t=l.default.findDOMNode(this.editingArea);if(!t)throw Error("Cannot find element for editing area");if(3===t.nodeType)throw Error("Editing area cannot be a text node");return t},e.prototype.renderEditingArea=function(){var t=this,e=this.props,n=e.children,i=e.preserveWhitespace,o={key:this.state.generation,ref:function(e){t.editingArea=e}};return s.default.Children.count(n)?s.default.cloneElement(s.default.Children.only(n),o):i?s.default.createElement("pre",r({},o)):s.default.createElement("div",r({},o))},e.prototype.render=function(){var t;return s.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(null!=(t=this.props.className)?t:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(t,e,n,i){if(this.editor){var o,r,a=this.isDelta(this.value)?i.getContents():i.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=e,this.value=a,null===(r=(o=this.props).onChange)||void 0===r||r.call(o,t,e,n,i))}},e.prototype.onEditorChangeSelection=function(t,e,n){if(this.editor){var i,o,r,a,A,s,l=this.getEditorSelection();d.default(t,l)||(this.selection=t,null===(o=(i=this.props).onChangeSelection)||void 0===o||o.call(i,t,e,n),!l&&t?null===(a=(r=this.props).onFocus)||void 0===a||a.call(r,t,e,n):l&&!t&&(null===(s=(A=this.props).onBlur)||void 0===s||s.call(A,l,e,n)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=c.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(s.default.Component);function h(t){Promise.resolve().then(t)}t.exports=u}}]);